# é–‹ç™¼æŒ‡å— (Development Guide)

æœ¬æŒ‡å—æ—¨åœ¨å”åŠ©é–‹ç™¼è€…å¿«é€Ÿä¸Šæ‰‹ **BookPublisher MD2Docx** çš„é–‹ç™¼ç’°å¢ƒï¼Œä¸¦ç†è§£æ—¥å¸¸é–‹ç™¼æµç¨‹ã€‚

## âš™ï¸ ç’°å¢ƒå»ºç½® (Setup)

### ç³»çµ±éœ€æ±‚
- **Node.js**: v18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬ (å»ºè­°ä½¿ç”¨ LTS)
- **å¥—ä»¶ç®¡ç†å™¨**: npm (é è¨­) æˆ– yarn/pnpm

### åˆæ¬¡å®‰è£
```bash
# Clone å°ˆæ¡ˆ
git clone https://github.com/eric861129/BookPublisher_MD2Doc.git
cd BookPublisher_MD2Doc

# å®‰è£ä¾è³´
npm install
```

---

## ğŸ“œ å¯ç”¨è…³æœ¬ (Scripts)

åœ¨ `package.json` ä¸­å®šç¾©äº†ä»¥ä¸‹å¸¸ç”¨æŒ‡ä»¤ï¼š

| æŒ‡ä»¤ | èªªæ˜ |
| :--- | :--- |
| `npm run dev` | å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ (Vite)ï¼Œé è¨­ port ç‚º 5173ã€‚æ”¯æ´ HMR (ç†±é‡è¼‰)ã€‚ |
| `npm run build` | å»ºç½®ç”Ÿç”¢ç’°å¢ƒç‰ˆæœ¬ï¼Œç”¢ç‰©ä½æ–¼ `dist/` ç›®éŒ„ã€‚ |
| `npm run preview` | åœ¨æœ¬åœ°é è¦½ `dist/` ä¸­çš„å»ºç½®çµæœã€‚ |
| `npm run test` | åŸ·è¡Œå–®å…ƒæ¸¬è©¦ (Vitest)ã€‚ |

---

## ğŸ› é™¤éŒ¯æŠ€å·§ (Debugging)

### 1. Markdown è§£æé™¤éŒ¯
è‹¥ç™¼ç¾è½‰æª”çµæœä¸å¦‚é æœŸï¼Œå¯ä»¥å…ˆæª¢æŸ¥ Parser çš„è¼¸å‡ºã€‚
åœ¨ `services/docxGenerator.ts` ä¸­ï¼Œå¯ä»¥åŠ å…¥ `console.log(blocks)` ä¾†æŸ¥çœ‹è§£æå¾Œçš„ AST çµæ§‹ï¼Œç¢ºèªæ˜¯å¦åœ¨è§£æéšæ®µå°±ç™¼ç”ŸéŒ¯èª¤ã€‚

### 2. Word æ¨£å¼é™¤éŒ¯
Word çš„æ¨£å¼é™¤éŒ¯è¼ƒç‚ºå›°é›£ã€‚å»ºè­°ä½¿ç”¨ `constants/theme.ts` ä¸­çš„é¡è‰²è®Šæ•¸é€²è¡Œè¦–è¦ºåŒ–é™¤éŒ¯ã€‚ä¾‹å¦‚ï¼Œæš«æ™‚å°‡æŸå€‹é‚Šæ¡†è¨­ç‚ºç´…è‰²ï¼Œä»¥ç¢ºèªè©²æ¨£å¼æ˜¯å¦æ­£ç¢ºå¥—ç”¨åˆ°ç›®æ¨™å…ƒç´ ä¸Šã€‚

### 3. Mermaid åœ–è¡¨å•é¡Œ
Mermaid æ¸²æŸ“å¤±æ•—é€šå¸¸æ˜¯å› ç‚ºèªæ³•éŒ¯èª¤æˆ– SVG è½‰æ›å•é¡Œã€‚
- ç¢ºèªç€è¦½å™¨ Console æ˜¯å¦æœ‰ Mermaid ç›¸é—œå ±éŒ¯ã€‚
- æª¢æŸ¥ `services/docx/builders/mermaid.ts` ä¸­çš„ Canvas ç¹ªè£½é‚è¼¯ã€‚

---

## ğŸ§ª æ¸¬è©¦æ’°å¯« (Testing)

æˆ‘å€‘ä½¿ç”¨ **Vitest** é€²è¡Œæ¸¬è©¦ã€‚æ–°å¢åŠŸèƒ½æ™‚ï¼Œè«‹å‹™å¿…æ–°å¢å°æ‡‰çš„æ¸¬è©¦æ¡ˆä¾‹ã€‚

### æ¸¬è©¦æª”æ¡ˆä½ç½®
æ‰€æœ‰æ¸¬è©¦ä½æ–¼ `tests/` ç›®éŒ„ä¸‹ï¼š
- `tests/markdownParser.test.ts`: æ¸¬è©¦è§£æé‚è¼¯ã€‚
- `tests/docxGenerator.test.ts`: æ¸¬è©¦ Word ç”Ÿæˆé‚è¼¯ (Snapshot Testing)ã€‚

### åŸ·è¡Œç‰¹å®šæ¸¬è©¦
```bash
npx vitest tests/markdownParser.test.ts
```

---

## ğŸ“¦ ç™¼å¸ƒæµç¨‹ (Release Workflow)

1. å®ŒæˆåŠŸèƒ½é–‹ç™¼ä¸¦é€šéæ¸¬è©¦ã€‚
2. æ›´æ–° `package.json` ä¸­çš„ç‰ˆæœ¬è™Ÿã€‚
3. æ›´æ–° `CHANGELOG.md` è¨˜éŒ„è®Šæ›´ã€‚
4. æäº¤ PR è‡³ `main` åˆ†æ”¯ã€‚

---

è‹¥æœ‰ä»»ä½•ç–‘å•ï¼Œæ­¡è¿åœ¨ Issue ä¸­æå‡ºè¨è«–ã€‚
